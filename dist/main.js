(()=>{"use strict";function a(a){return{length:a,beenHit:0,hit:function(){this.beenHit++},isSunk:function(){return this.beenHit>=this.length}}}function e(a="computer"){return{player:a,playerBoard:{board:[...Array(10)].map((a=>Array(10).fill(null))),playedBoard:[...Array(10)].map((a=>Array(10).fill(null))),shipsAlive:0,placeShip:function(a,e,r,t){if("horizontal"===r)for(let r=0;r<t.length;r++)this.board[e][a+r]=t;else for(let r=0;r<t.length;r++)this.board[e+r][a]=t;this.shipsAlive++},receiveAttack:function(a,e){if(this.playedBoard[e][a])return;const r=this.board[e][a];r?(r.hit(),r.isSunk()&&this.shipsAlive--):this.board[e][a]=0,this.playedBoard[e][a]=1},allShipsSunk:function(){return!this.shipsAlive},playAvailable:function(){for(let a=0;a<10;a++)for(let e=0;e<10;e++)if(!this.playedBoard[a][e])return!0;return!1},canPlace:function(a,e,r,t){if("horizontal"===r){if(a+t.length>9)return!1;for(let r=0;r<t.length;r++)if(this.board[e][a+r])return!1}else{if(e+t.length>9)return!1;for(let r=0;r<t.length;r++)if(this.board[e+r][a])return!1}return!0},randomPlace:function(a){let e,r;const t=Math.floor(2*Math.random())?"horizontal":"vertical";do{e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random())}while(!this.canPlace(e,r,t,a));this.placeShip(e,r,t,a)}},attack:function(a,e,r){a.receiveAttack(e,r)},randomCoord:function(a){if(!a.playAvailable())return;let e,r;do{e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random())}while(a.playedBoard[r][e]);return{x:e,y:r}}}}function r(a,e){for(let r=0;r<10;r++)for(let t=0;t<10;t++)e.playerBoard.playedBoard[r][t]&&document.querySelector(`.computer [data-x="${t}"][data-y="${r}"]`).classList.add("played"),a.playerBoard.playedBoard[r][t]&&document.querySelector(`.player [data-x="${t}"][data-y="${r}"]`).classList.add("played")}!function(){const t=e("1"),o=e("computer");t.playerBoard.randomPlace(a(5)),t.playerBoard.randomPlace(a(4)),t.playerBoard.randomPlace(a(3)),t.playerBoard.randomPlace(a(3)),t.playerBoard.randomPlace(a(2)),o.playerBoard.randomPlace(a(5)),o.playerBoard.randomPlace(a(4)),o.playerBoard.randomPlace(a(3)),o.playerBoard.randomPlace(a(3)),o.playerBoard.randomPlace(a(2));const l=document.querySelector(".container.player");for(let a=0;a<10;a++)for(let e=0;e<10;e++){const r=document.createElement("div");r.classList.add("cell"),r.dataset.x=e,r.dataset.y=a,t.playerBoard.board[a][e]&&r.classList.add("ship"),l.appendChild(r)}const n=document.querySelector(".container.computer");for(let a=0;a<10;a++)for(let e=0;e<10;e++){const r=document.createElement("div");r.classList.add("cell"),r.dataset.x=e,r.dataset.y=a,o.playerBoard.board[a][e]&&r.classList.add("ship"),n.appendChild(r)}!async function(a,e){let t=!0;for(;!a.playerBoard.allShipsSunk()&&!e.playerBoard.allShipsSunk();){if(t){const r=await new Promise((a=>{const e=document.querySelectorAll(".container.computer .cell");function r(t){const o=t.target,l=Number(o.dataset.x),n=Number(o.dataset.y);e.forEach((a=>{a.removeEventListener("click",r)})),a({x:l,y:n})}e.forEach((a=>{a.addEventListener("click",r)}))}));e.playerBoard.playedBoard[r.y][r.x]||(a.attack(e.playerBoard,r.x,r.y),t=!t)}else{const r=e.randomCoord(a.playerBoard);e.attack(a.playerBoard,r.x,r.y),t=!t}r(a,e)}}(t,o)}()})();